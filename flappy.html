<!doctype html>
<html lang='nl'>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<title>3D Flappy</title>
<link rel='stylesheet' href='css/style.css'>
</head>
<body class='neon-bg'>
<div id='ui' style='position:fixed;left:12px;top:12px;z-index:6;color:#fff'><a class='btn' href='index.html'>← Terug</a></div>
<script type='module'>
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js';
/* Flappy 3D */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 2000);
const renderer = new THREE.WebGLRenderer({antialias:true}); renderer.setSize(innerWidth, innerHeight); document.body.appendChild(renderer.domElement);
const bird = new THREE.Mesh(new THREE.BoxGeometry(0.6,0.6,0.6), new THREE.MeshStandardMaterial({color:0xffcc00})); bird.position.set(0,1,0); scene.add(bird);
camera.position.set(0,4,8);
let vy=0, gravity=-0.04, pipes=[], spawn=0, score=0;
function spawnPipe(){ const gap=(Math.random()*3)+2; const y=(Math.random()*2)-1; const top=new THREE.Mesh(new THREE.BoxGeometry(1.6,6,1), new THREE.MeshStandardMaterial({color:0x228833})); top.position.set(0,6+y,-40); const bottom=top.clone(); bottom.position.set(0,-6+y,-40); scene.add(top); scene.add(bottom); pipes.push({top:top,bottom:bottom}); }
function update(dt, keys){
  if(keys[' ']||keys['ArrowUp']){ vy=0.9; keys[' ']=false; keys['ArrowUp']=false; }
  vy += gravity; bird.position.y += vy; if(bird.position.y < -4){ alert('Game over: '+score); location.reload(); }
  for(let i=pipes.length-1;i>=0;i--){ pipes[i].top.position.z += 20*dt; pipes[i].bottom.position.z += 20*dt; if(pipes[i].top.position.z > 8){ scene.remove(pipes[i].top); scene.remove(pipes[i].bottom); pipes.splice(i,1); score++; } }
  spawn += dt; if(spawn > 1.1){ spawnPipe(); spawn = 0; }
}
function render(){ renderer.render(scene,camera); }
const engine = new Engine((dt,keys)=>update(dt,keys), ()=>render());
</script>
</body>
</html>
